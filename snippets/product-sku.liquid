<p id="variant-sku">SKU: {{ product.variants.first.sku }}</p>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const skuDisplay = document.getElementById('variant-sku');
    const productData = {{ product | json }};

    function updateSkuByVariantId(variantId) {
      const matchedVariant = productData.variants.find(v => v.id == variantId);
      if (matchedVariant) {
        const sku = matchedVariant.sku ? matchedVariant.sku : 'N/A';
        skuDisplay.textContent = 'SKU: ' + sku;

        // âœ… Console log both variant ID and SKU
        console.log('Selected Variant ID:', variantId);
        console.log('SKU:', sku);
      }
    }

    function getVariantIdFromURL() {
      const params = new URLSearchParams(window.location.search);
      return params.get('variant');
    }

    let lastVariantId = null;

    // Check URL every 500ms for variant changes
    setInterval(() => {
      const currentVariantId = getVariantIdFromURL();

      if (currentVariantId && currentVariantId !== lastVariantId) {
        lastVariantId = currentVariantId;
        updateSkuByVariantId(currentVariantId);
      }
    }, 500);
  });
</script>
